Информация для ваучера
######################

Описание XML схемы получения информации для ваучера
===================================================

Запрос на получение XML-описания ваучера сейчас формируется через URL
(методом GET).

XSD-схема ответа информации для ваучера:

-  ``www/xsd/VoucherInfoResponse.xsd``

Запрос информации для ваучера
-----------------------------

В запросе нужно указать идентификатор заказа ``?order_id=id_заказа``,
взятый из ответа на создание заказа, и идентификатор элемента заказа
``?item_id=id_элемента_заказа``, взятый из атрибута элемента VehicleItem
из информации о заказе. Запрос формируется по пути:
``/xml/voucher_info``

Ответ на запрос информации для ваучера, VoucherInfoResponse
-----------------------------------------------------------

::

    <?xml version="1.0" encoding="utf-8"?>
    <VoucherInfoResponse>
      [<Errors><Error code="..." description="..."></Errors>]
      <Order Id="...">
        <ItemList>
          <Item Id="...">
            <VoucherAvailable>0|1</VoucherAvailable>
            <Voucher>
              <Issued>...</Issued>
              <BookingDetails>
                [<Supplier>...</Supplier>]
                [<Reference>...</Reference>]
                [<AdditionalDetailList>
                   <AdditionalDetail> - список дополнительных данных
                     <Title>...</Title>
                     <Value>...</Value>
                   </AdditionalDetail>
                 </AdditionalDetailList>]
              </BookingDetails>
              <Vehicle>
                <CarInfo>         
                  <Detail>
                     <Title>...</Title>
                     <Value>...</Value>
                  </Detail>
              </CarInfo>
              <DriverInfo>         
                  <Detail>
                     <Title>...</Title>
                     <Value>...</Value>
                  </Detail>
              </DriverInfo>
              <LocationsInfo>
                  <PickUp>
                     <Detail>
                        <Title>...</Title>
                        <Value>...</Value>
                     </Detail>
                  </PickUp>
                  <DropOff>
                     <Detail>
                        <Title>...</Title>
                        <Value>...</Value>
                     </Detail>
                  </DropOff>
                </LocationsInfo>         
                <PolicyInfo>...</PolicyInfo>
                <RentConditions>...</RentConditions>
              </Vehicle>          
              <RentConditions>...</RentConditions>
              [<AOTNumbers> - список контактов для экстренной связи
                 <Location name="...">...</Location>
               </AOTNumbers>]
              [<AdditionalInformation>...</AdditionalInformation>]
            </Voucher>
          </Item>
        </ItemList>
      </Order>
    </VoucherInfoResponse>

Элемент VoucherInfoResponse
---------------------------

Корневой элемент.

**Атрибуты:** нет.

**Дочерние элементы:**

+----------+---------------------------------------+----------------------------+
| Имя      | Обязательный                          | Описание                   |
+==========+=======================================+============================+
| Errors   | Нет                                   | Список ошибок, если есть   |
+----------+---------------------------------------+----------------------------+
| Order    | Нет (отсутствует, если есть ошибки)   | Описание заказа            |
+----------+---------------------------------------+----------------------------+

Элемент Errors
--------------

Список ошибок, если таковые имеются.

**Атрибуты:** нет.

**Дочерние элементы:**

+-------------------------+-------------------------+-------------------------+
| Имя                     | Обязательный            | Описание                |
+=========================+=========================+=========================+
| Error                   | Да                      | Описание ошибки.        |
|                         |                         |  Атрибуты:              |
|                         |                         |                         |
|                         |                         | -  ``code`` - код       |
|                         |                         |    ошибки               |
|                         |                         | -  ``description`` -    |
|                         |                         |    описание ошибки      |
+-------------------------+-------------------------+-------------------------+

Элемент Order
-------------

Содержит описание заказа.

**Атрибуты:**

+-------+---------+----------------+------------------------+
| Имя   | Тип     | Обязательный   | Описание               |
+=======+=========+================+========================+
| Id    | Число   | Да             | Идентификатор заказа   |
+-------+---------+----------------+------------------------+

**Дочерние элементы:**

+------------+----------------+----------------------------------+
| Имя        | Обязательный   | Описание                         |
+============+================+==================================+
| ItemList   | Да             | Список элементов заказа (Item)   |
+------------+----------------+----------------------------------+

Элемент Order/ItemList
----------------------

Содержит список элементов заказа.

**Атрибуты:** нет.

**Дочерние элементы:**

+--------+----------------+-----------------------------+
| Имя    | Обязательный   | Описание                    |
+========+================+=============================+
| Item   | Да             | Описание элемента заказа.   |
+--------+----------------+-----------------------------+

Элемент Order/ItemList/Item
---------------------------

Содержит описание элемента заказа.

**Атрибуты:**

+-------+---------+----------------+---------------------------------+
| Имя   | Тип     | Обязательный   | Описание                        |
+=======+=========+================+=================================+
| Id    | Число   | Да             | Идентификатор элемента заказа   |
+-------+---------+----------------+---------------------------------+

| 
|  **Дочерние элементы:**

+--------------------+-----------+----------------+--------------------------------------------+
| Имя                | Тип       | Обязательный   | Описание                                   |
+====================+===========+================+============================================+
| VoucherAvailable   | 0 или 1   | Да             | Есть ли ваучер у элемента заказа           |
+--------------------+-----------+----------------+--------------------------------------------+
| Voucher            | Строка    | Да             | Данные ваучера для этого элемента заказа   |
+--------------------+-----------+----------------+--------------------------------------------+

Элемент Order/ItemList/Item/Voucher
-----------------------------------

Данные ваучера для этого элемента заказа.

**Атрибуты:** нет.

**Дочерние элементы:**

+-------------------------+----------------+-----------------------------------------+
| Имя                     | Обязательный   | Описание                                |
+=========================+================+=========================================+
| Issued                  | Да             | Дата выпуска ваучера                    |
+-------------------------+----------------+-----------------------------------------+
| BookingDetails          | Да             | Данные о бронировании                   |
+-------------------------+----------------+-----------------------------------------+
| Vehicle                 | Да             | Описание авто                           |
+-------------------------+----------------+-----------------------------------------+
| AOTNumbers              | Нет            | Список контактов для экстренной связи   |
+-------------------------+----------------+-----------------------------------------+
| AdditionalInformation   | Нет            | Дополнительная информация               |
+-------------------------+----------------+-----------------------------------------+

Элемент Order/ItemList/Item/Voucher/BookingDetails
--------------------------------------------------

Данные о бронировании

**Атрибуты:** нет.

**Дочерние элементы:**

+------------------------+-------------------------------------+----------------+-----------------------------------------------+
| Имя                    | Тип                                 | Обязательный   | Описание                                      |
+========================+=====================================+================+===============================================+
| Supplier               | Строка                              | Нет            | Название поставщика                           |
+------------------------+-------------------------------------+----------------+-----------------------------------------------+
| Reference              | Строка                              | Нет            | Референс заказа                               |
+------------------------+-------------------------------------+----------------+-----------------------------------------------+
| AdditionalDetailList   | Список элементов AdditionalDetail   | Нет            | Список дополнительных данных о бронировании   |
+------------------------+-------------------------------------+----------------+-----------------------------------------------+

Элемент Order/ItemList/Item/Voucher/BookingDetails/AdditionalDetailLists/AdditionalDetailList
---------------------------------------------------------------------------------------------

Список дополнительных данных

**Атрибуты:** нет.

**Дочерние элементы:**

+-------------------------+-------------------------+-------------------------+
| Имя                     | Обязательный            | Описание                |
+=========================+=========================+=========================+
| AdditionalDetail        | Нет                     | Дополнительные данные - |
|                         |                         | пара дочерних           |
|                         |                         | элементов:              |
|                         |                         |                         |
|                         |                         | -  Title - название     |
|                         |                         |    дополнительного      |
|                         |                         |    параметра            |
|                         |                         | -  Value - его значение |
+-------------------------+-------------------------+-------------------------+

Элемент Order/ItemList/Item/Voucher/Vehicle
-------------------------------------------

Данные об авто, элементе заказа.

**Атрибуты:** нет.

+------------------+----------------------+----------------+--------------------------------------------+
| Имя              | Тип                  | Обязательный   | Описание                                   |
+==================+======================+================+============================================+
| CarInfo          | Вложенные элементы   | Да             | Информация об авто                         |
+------------------+----------------------+----------------+--------------------------------------------+
| DriverInfo       | Вложенные элементы   | Да             | Информация о водителе                      |
+------------------+----------------------+----------------+--------------------------------------------+
| LocationsInfo    | Вложенные элементы   | Да             | Информация о местах получения / возврата   |
+------------------+----------------------+----------------+--------------------------------------------+
| PolicyInfo       | Строка               | Да             | Информация о страховом полисе              |
+------------------+----------------------+----------------+--------------------------------------------+
| RentConditions   | Строка               | Да             | Условия аренды                             |
+------------------+----------------------+----------------+--------------------------------------------+

Элемент Order/ItemList/Item/Voucher/Vehicle/CarInfo
---------------------------------------------------

Данные (параметры) авто (группа, класс авто)

**Атрибуты:** нет.

**Дочерние элементы:**

+-------------------------+-------------------------+-------------------------+
| Имя                     | Обязательный            | Описание                |
+=========================+=========================+=========================+
| Detail                  | Нет                     | пара дочерних           |
|                         |                         | элементов:              |
|                         |                         |                         |
|                         |                         | -  Title - название     |
|                         |                         |    параметра            |
|                         |                         | -  Value - его значение |
+-------------------------+-------------------------+-------------------------+

Элемент Order/ItemList/Item/Voucher/Vehicle/DriverInfo
------------------------------------------------------

Данные водителя (имя водителя)

**Атрибуты:** нет.

**Дочерние элементы:**

+-------------------------+-------------------------+-------------------------+
| Имя                     | Обязательный            | Описание                |
+=========================+=========================+=========================+
| Detail                  | Нет                     | пара дочерних           |
|                         |                         | элементов:              |
|                         |                         |                         |
|                         |                         | -  Title - название     |
|                         |                         |    параметра            |
|                         |                         | -  Value - его значение |
+-------------------------+-------------------------+-------------------------+

Элемент Order/ItemList/Item/Voucher/LocationsInfo
-------------------------------------------------

Данные (параметры) места получения / возврата

**Атрибуты:** нет.

**Дочерние элементы:**

+-----------+----------------+-----------------------------+
| Имя       | Обязательный   | Описание                    |
+===========+================+=============================+
| PickUp    | Да             | параметры места получения   |
+-----------+----------------+-----------------------------+
| DropOff   | Да             | параметры места возврата    |
+-----------+----------------+-----------------------------+

Элемент Order/ItemList/Item/Voucher/Vehicle/LocationsInfo/PickUp
----------------------------------------------------------------

Данные (параметры) места получения (дата, время, страна, город, станция... )

**Атрибуты:** нет.

**Дочерние элементы:**

+-------------------------+-------------------------+-------------------------+
| Имя                     | Обязательный            | Описание                |
+=========================+=========================+=========================+
| Detail                  | Нет                     | пара дочерних           |
|                         |                         | элементов:              |
|                         |                         |                         |
|                         |                         | -  Title - название     |
|                         |                         |    параметра            |
|                         |                         | -  Value - его значение |
+-------------------------+-------------------------+-------------------------+

Элемент Order/ItemList/Item/Voucher/Vehicle/LocationsInfo/DropOff
-----------------------------------------------------------------

Данные (параметры) места возврата (дата, время, страна, город, станция
... )

**Атрибуты:** нет.

**Дочерние элементы:**

+-------------------------+-------------------------+-------------------------+
| Имя                     | Обязательный            | Описание                |
+=========================+=========================+=========================+
| Detail                  | Нет                     | пара дочерних           |
|                         |                         | элементов:              |
|                         |                         |                         |
|                         |                         | -  Title - название     |
|                         |                         |    параметра            |
|                         |                         | -  Value - его значение |
+-------------------------+-------------------------+-------------------------+

Элемент Order/ItemList/Item/Voucher/AOTNumbers
----------------------------------------------

Список контактов для экстренной связи.

**Атрибуты:** нет.

**Дочерние элементы:**

+--------------------+--------------------+--------------------+--------------------+
| Имя                | Тип                | Обязательный       | Описание           |
+====================+====================+====================+====================+
| Location           | Строка             | Да                 | Телефоны для       |
|                    |                    |                    | города, заданного  |
|                    |                    |                    | в атрибуте:        |
|                    |                    |                    |                    |
|                    |                    |                    | -  ``name`` -      |
|                    |                    |                    |    название города |
+--------------------+--------------------+--------------------+--------------------+