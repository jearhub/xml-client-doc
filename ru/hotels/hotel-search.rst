Поиск Отелей
############

Описание XML схем поиска отелей
===============================

XSD-схемы поиска отелей:

- :download:`www/xsd/hotel/HotelSearchRequest.xsd <../../themes/hotelbook/static/xsd/hotel/HotelSearchRequest.xsd>`

- :download:`www/xsd/hotel/HotelSearchResponse.xsd <../../themes/hotelbook/static/xsd/hotel/HotelSearchResponse.xsd>`

Асинхронный поиск отелей - см. `Элемент HotelSearchId <#h1285-20>`_

Запрос на поиск отелей, HotelSearchRequest
------------------------------------------

XML-схема запроса:

::

    <?xml version="1.0" encoding="utf-8"?>

    <HotelSearchRequest>
      <Request
        cityId="id"
        checkIn="YYYY-MM-DD"
        duration="число от 1 до 31"

        [hotelName=""]
        [categoryId="id"]
        [hotelId="id"]
        [locationId="id"]
        [visa="msk|spb"]
        [confirmation="online|onRequest|all"]
        [limitResults=""]/>

      [<HotelItems><HotelItemId>...</HotelItemId>...</HotelItems>] - одна или несколько требуемых услуг
      <Rooms>
        
        <Room 
           roomNumber=".." - число комнат
           adults=".." - число взрослых
           [children=".."] - число детей: 0, 1, ...
           [cots=0|1|2] - число люлек
        >
           [<ChildAge>число</ChildAge>] - возрасты детей, от 2-х до 18-ти
           [<ChildAge>число</ChildAge>]
           ...
        </Room>
        
      </Rooms>
    </HotelSearchRequest>

Элемент HotelSearchRequest
--------------------------

Запрос на поиск отелей.

| **Корневой элемент.**
| **Аттрибутов** нет.

**Дочерние элементы** ``HotelSearchRequest``:

+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
| **Элемент**    | **Обязательный** | **Описание**                      |                                    |                               |
+================+==================+===================================+====================================+===============================+
| ``Request``    | да               | Параметры запроса (как аттрибуты) |                                    |                               |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
| ``HotelItems`` | нет              | Требуемые услуги                  |                                    |                               |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
|                | **Элемент**      | **Обязательный**                  | **Описание**                       |                               |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
|                | ``HotelItemId``  | да                                | id услуги (услуг может быть много) |                               |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
| ``Rooms``      | да               | Комнаты                           |                                    |                               |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
|                | **Элемент**      | **Обязательный**                  | **Описание**                       |                               |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
|                | ``Room``         | да                                | Комната (комнат может быть много)  |                               |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
|                |                  | **Элемент**                       | **Обязательный**                   | **Описание**                  |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
|                |                  | ``ChildAge``                      | нет                                | Возраст ребёнка (число 2..18) |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+
| ``Providers``  | нет              | Список поставщиков                |                                    |                               |
+----------------+------------------+-----------------------------------+------------------------------------+-------------------------------+

Элемент Request
---------------

В элементе указываются параметры запроса (как аттрибуты).

| **Обязательный элемент.**
| **Дочерних элементов нет.**

**Аттрибуты элемента** ``Request``:

+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| **Аттрибут**       | **Тип**                          | **Обязательный**   | **Описание**                                                                                                                         |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``cityId``         | число                            | да                 | id города, список всех доступных городов /xml/cities                                                                                 |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``checkIn``        | дата, в формате ``YYYY-MM-DD``   | да                 | Дата размещения в отеле (первый день)                                                                                                |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``duration``       | число 1..31                      | да                 | Продолжительность, дни                                                                                                               |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``hotelName``      | строка                           | нет                | Название отеля (фрагмент из названия), список всех доступных отелей /xml/hotel\_list                                                 |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``categoryId``     | число                            | нет                | id категории звёздности отеля, список всех доступных категорий /xml/hotel\_cat                                                       |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``hotelId``        | число                            | нет                | id отеля, список всех доступных отелей /xml/hotel\_list                                                                              |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``locationId``     | число                            | нет                | id локации отеля, список всех локаций /xml/location                                                                                  |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``visa``           | msk, spb                         | нет                | Если указан аттрибут, то поиск отелей, с обязательным наличием одной из выбранных виз, если аттрибут не указан – независимо от виз   |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``confirmation``   | online, onRequest, all           | нет                | Требуемый вид подтверждения. Если all или не указан – независимо                                                                     |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| ``limitResults``   | число                            | нет                | Лимит выводимых результатов                                                                                                          |
+--------------------+----------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+

Элемент HotelItems
------------------

Требуемые услуги в отеле (указываются как вложенные элементы ``HotelItemId``).

| **Необязательный элемент.**
| **Аттрибутов нет.**

**Дочерние элементы** HotelItems:

+-------------------+--------------------+-------------------------------------------------------------------+
| **Элемент**       | **Обязательный**   | **Описание**                                                      |
+-------------------+--------------------+-------------------------------------------------------------------+
| ``HotelItemId``   | да                 | id услуги, услуг может быть много, списки всех доступных услуг:   |
|                   |                    |  /xml/hotel\_facility – услуги отеля                              |
|                   |                    |  /xml/hotel\_type – типы отелей                                   |
|                   |                    |  /xml/room\_amenity – удобства в номере                           |
+-------------------+--------------------+-------------------------------------------------------------------+

Элемент Providers
-----------------

Список поставщиков, по которым будет производиться поиск (указываются как вложенные элементы ``ProviderId``).
Этот элемент имеют право указывать только те пользователи, у которых установлено право "Видит поставщика".

| **Необязательный элемент.**
| **Аттрибутов нет.**

**Дочерние элементы:**

+------------------+--------------------+------------------------------------------------------------------------------------------------------+
| **Элемент**      | **Обязательный**   | **Описание**                                                                                         |
+------------------+--------------------+------------------------------------------------------------------------------------------------------+
| ``ProviderId``   | да                 | id поставщика, постовщиков может быть несколько, список всех доступных поставщиков: /xml/providers   |
+------------------+--------------------+------------------------------------------------------------------------------------------------------+

Элемент Rooms
-------------

В элементе указывается список требуемых комнат(дочерние элементы ``Room``). Максимальное количество человек в запросе не может превышать 9.

| **Обязательный элемент.**
| **Аттрибутов нет.**

**Дочерние элементы Rooms:**

+---------------+--------------------+-----------------------------------------------+
| **Элемент**   | **Обязательный**   | **Описание**                                  |
+---------------+--------------------+-----------------------------------------------+
| ``Room``      | да                 | Параметры комнаты (комнат может быть много)   |
+---------------+--------------------+-----------------------------------------------+

Элемент Room
^^^^^^^^^^^^

Параметры комнаты (указываются как аттрибуты). Если в комнате должен быть ребенок (children >= 1), то указывается ещё элемент ``Child Age``.

**Обязательный элемент.**

**Аттрибуты элемента** ``Room``:

+------------------+-----------------+--------------------+------------------------------------------------------+
| **Аттрибут**     | **Тип**         | **Обязательный**   | **Описание**                                         |
+------------------+-----------------+--------------------+------------------------------------------------------+
| ``roomNumber``   | число, 1 - 9    | да                 | Число таких комнат, от 1 до 9 включительно           |
+------------------+-----------------+--------------------+------------------------------------------------------+
| ``roomSizeId``   | число           | нет                | id типа размещения ``/xml/room_size``                |
+------------------+-----------------+--------------------+------------------------------------------------------+
| ``adults``       | число, 1 - 4    | да                 | Число взрослых в комнате, от 1 до 4                  |
+------------------+-----------------+--------------------+------------------------------------------------------+
| ``children``     | число 1 - 4     | нет                | Число детей в комнате, 0 (детей нет) или от 1 до 4   |
+------------------+-----------------+--------------------+------------------------------------------------------+
| ``cots``         | число 0, 1, 2   | нет                | Число люлек, 0 или 1 или 2                           |
+------------------+-----------------+--------------------+------------------------------------------------------+

**Дочерние элементы** ``Room``:

+--------------+------------------+----------------------------------------------------------------------------------------------------------------------------------+
| **Элемент**  | **Обязательный** | **Описание**                                                                                                                     |
+==============+==================+==================================================================================================================================+
| ``ChildAge`` | нет              | Возраст ребёнка (2..18). Элементы должны присутствовать, если в родительском элементе ``Room`` аттрибут ``children`` не нулевой. |
|              |                  | Количество этих элементов должно быть равным значению children. Если указан возраст меньше 2, система вернет ошибку              |
+--------------+------------------+----------------------------------------------------------------------------------------------------------------------------------+

Ответ на поиск отелей, HotelSearchResponse
------------------------------------------

XML-схема ответа:

::

    <?xml version="1.0" encoding="utf-8"?>

    <HotelSearchResponse>
      <HotelSearchRequest>... исходный запрос ...</HotelSearchRequest>
      <Errors>
        <Error [type="..."] [code="..."] description="..."> - ошибки
      </Errors>

      <HotelSearch
        searchId="id"
        countryId="id" countryName=".."
        resourtId="id" resortName=".."
        cityId="id" cityName=".."/>

      <Hotels>
        <Hotel
            resultId="id"
            hotelId="id"
            hotelName=".."
            hotelCatId="id"
            hotelCatName=".."
            confirmation="onRequest|online|inaccessible" -- вид подтверждения
            price="orig_price" -- цена в валюте currency
            currency=".."
            comparePrice="real_price" -- цена в рублях
            duration=".."
            information=".."
            visaMsk="true|false"
            visaSpb="true|false"
            [useNds="true|false"]
            specialOffer="true|false" - действует ли специальное предложение

            [providerId="id"] -- поля может не быть, в зависимости от настроек пользователя
        >
          <Rooms>
            <Room
              roomName="..." 

              roomNumber=".."
              mealId="id"
              mealName="..."
              mealBreakfastId="id"
              mealBreakfastName="..."
              children=".."
              cots="0|1|2"
              sharingBedding="true|false"
            >

              [<ChildAge>2..18</ChildAge>] -- если есть ребёнок, возраст
            </Room>
          </Rooms>
          [<Locations>

            <Location id=".." name="..." /> -- может быть несколько локаций, к которым относится отель
          </Locations>]
        </Hotel>
      </Hotels>
      [<ProcessedTime>
        [<ProviderTime [providerId="..."] [transferTime="..."] [processTime="..."] />]
        [<DbTime [maxTime="..."] [details="..."] />]
      </ProcessedTime>]
    </HotelSearchResponse>

Элемент HotelSearchResponse
---------------------------

Ответ, сформированный сервером на поиск отелей **HotelSearchRequest**.

| **Корневой элемент.**
| **Аттрибутов нет.**

**Дочерние элементы** ``HotelSearchResponse``:

+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
| **Элемент**            | **Обязательный** | **Описание**                                   |                                                      |                                           |
+========================+==================+================================================+======================================================+===========================================+
| ``HotelSearchRequest`` | нет              | Исходный запрос, см. выше – HotelSearchRequest |                                                      |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
| ``Errors``             | нет              | Список ошибок, если есть                       |                                                      |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        | **Элемент**      | **Обязательный**                               | **Описание**                                         |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        | ``Error``        | да                                             | Описание ошибки (тип и код), ошибок может быть много |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
| ``HotelSearch``        | нет              | Параметры запроса на поиск отелей              |                                                      |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
| ``Hotels``             | нет              | Список найденных отелей                        |                                                      |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        | **Элемент**      | **Обязательный**                               | **Описание**                                         |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        | ``Hotel``        | нет                                            | Найденный отель                                      |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        |                  | **Элемент**                                    | **Обязательный**                                     | **Описание**                              |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        |                  | ``Rooms``                                      | да                                                   | Комнаты ``Room``                          |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        |                  | ``Locations``                                  | нет                                                  | Локации ``Location``                      |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        |                  | ``SpecialOffers``                              | нет                                                  | Специальное предложение ``SpecialOffer``  |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
| ``ProcessedTime``      | нет              | Список элементов                               |                                                      |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        | **Элемент**      | **Обязательный**                               | **Описание**                                         |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+
|                        | ``ProviderTime`` | нет                                            | Время выполнения поиска                              |                                           |
+------------------------+------------------+------------------------------------------------+------------------------------------------------------+-------------------------------------------+

Элемент HotelSearchRequest
--------------------------

Исходный XML-запрос, который передал пользователь.
Необязательный элемент. Отсутствует если исходный XML-запрос содержал ошибки в синтаксисе.
Описание схемы элемента см. выше (``HotelSearchRequest``)

Элемент Errors
--------------
Смотри страницу :doc:`Ошибки <../errors>`


Элемент HotelSearch
-------------------

Параметры поиска отелей. Необязательный элемент. Может отсутствовать, если возникли ошибки. Дочерних элементов нет.  

Аттрибуты элемента ``HotelSearch``: 

+-----------------+---------+------------------+---------------------------------------------------------+
| **Аттрибут**    | **Тип** | **Обязательный** | **Описание**                                            |
+=================+=========+==================+=========================================================+
| ``searchId``    | число   | да               | id поиска                                               |
+-----------------+---------+------------------+---------------------------------------------------------+
| ``countryId``   | число   | да               | id страны. Список всех доступных стран /xml/countries   |
+-----------------+---------+------------------+---------------------------------------------------------+
| ``countryName`` | строка  | да               | Название страны                                         |
+-----------------+---------+------------------+---------------------------------------------------------+
| ``resortId``    | число   | да               | id курорта. Список всех доступных курортов /xml/resorts |
+-----------------+---------+------------------+---------------------------------------------------------+
| ``resortName``  | строка  | да               | Название курорта                                        |
+-----------------+---------+------------------+---------------------------------------------------------+
| ``cityId``      | число   | да               | id города. Список всех доступных городов /xml/cities    |
+-----------------+---------+------------------+---------------------------------------------------------+
| ``cityName``    | строка  | да               | Название города                                         |
+-----------------+---------+------------------+---------------------------------------------------------+

Элемент Hotels
--------------

Список отелей (дочерние элементы ``Hotel``). 
Необязательный элемент. Может отсутствовать, если возникли ошибки. 

Аттрибуты элемента ``Hotels``:

+---------------------------+---------+------------------+---------------------------------------------------------+
| **Аттрибут**              | **Тип** | **Обязательный** | **Описание**                                            |
+===========================+=========+==================+=========================================================+
| ``totalHotels``           | число   | нет              | Количество отелей                                       |
+---------------------------+---------+------------------+---------------------------------------------------------+
| ``totalResults``          | число   | нет              | Количество результатов поиска                           |
+---------------------------+---------+------------------+---------------------------------------------------------+
| ``searchingIsCompleted``  | boolean | нет              | Признак завершения поиска                               |
+---------------------------+---------+------------------+---------------------------------------------------------+


Дочерние элементы ``Hotels``: 

+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
| **Элемент** | **Обязательный**  | **Описание**                   |                          |                                            |
+=============+===================+================================+==========================+============================================+
| ``Hotel``   | нет               | Найденный отель, его аттрибуты |                          |                                            |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             | **Элемент**       | **Обязательный**               | **Описание**             |                                            |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             | ``Rooms``         | да                             | Комнаты                  |                                            |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             |                   | **Элемент**                    | **Обязательный**         | **Описание**                               |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             |                   | ``Room``                       | да                       | Аттрибуты комнаты, может быть много комнат |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             | ``Locations``     | нет                            | Локации отеля            |                                            |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             |                   | **Элемент**                    | **Обязательный**         | **Описание**                               |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             |                   | ``Location``                   | да                       | Локации, может быть много локаций          |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             | ``SpecialOffers`` | нет                            | Специальные предложения  |                                            |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             |                   | **Элемент**                    | **Обязательный**         | **Описание**                               |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+
|             |                   | ``SpecialOffer``               | да                       | Специальное предложение                    |
+-------------+-------------------+--------------------------------+--------------------------+--------------------------------------------+

Элемент Hotel
-------------

Содержит список параметров(аттрибутов) конкретного отеля, список комнат(элемент ``Rooms``) и возможно, список локаций (элемент ``Locations``) и спецпредложений. Необязательный элемент. Может отсутствовать, если возникли ошибки или нет подходящих под критерии поиска отелей.  

Аттрибуты элемента ``Hotel``: 

+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| **Аттрибут**               | **Тип**                         | **Обязательный** | **Описание**                                                                                        |
+============================+=================================+==================+=====================================================================================================+
| ``resultId``               | число                           | да               | id результата. Свой для каждого найденного отеля.                                                   |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``hotelId``                | число                           | да               | id отеля, список всех доступных отелей /xml/hotel_list                                              |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``hotelName``              | строка                          | да               | Название отеля                                                                                      |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``hotelCatId``             | число                           | да               | id категории звёздности отеля, список всех доступных категорий /xml/hotel_cat                       |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``hotelCatName``           | строка                          | да               | Название категории звёздности                                                                       |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``hotelAddress``           | строка                          | да               | Адрес отеля                                                                                         |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``hotelSmallPhotoUrl``     | строка                          | да               | URL адрес фотографии отеля (маленький размер)                                                       |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``hotelLatitude``          | строка                          | нет              | Широта. Координата отеля.                                                                           |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``hotelLongitude``         | строка                          | нет              | Долгота. Координата отеля.                                                                          |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``confirmation``           | onRequest, online, inaccessible | да               | Вид подтверждения («по запросу», «онлайн» и «недоступен» соответственно).                           |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``price``                  | Число с плавающей точкой        | да               | Цена в валюте ``currency``                                                                          |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``priceStatus``            | строка                          | да               | Статус оплаченности                                                                                 |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``priceBreakdownStatus``   | строка                          | да               | Статус                                                                                              |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``currency``               | строка                          | да               | Название валюты отеля                                                                               |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``comparePrice``           | Число с плавающей точкой        | нет              | Цена в рублях                                                                                       |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``duration``               | число(1..31)                    | да               | Продолжительность, дни                                                                              |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``information``            | строка                          | да               | Дополнительная информация                                                                           |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``visaMsk``                | true, false                     | да               | Виза Msk (true -- да, false -- нет)                                                                 |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``visaSpb``                | true, false                     | да               | Виза Spb (true -- да, false -- нет)                                                                 |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``useNds``                 | true, false                     | нет              | Включен ли НДС (true -- да, false -- нет). Если атрибут отсутствует - не облагается налогом         |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``specialOffer``           | true, false                     | да               | Действует ли специальное предложение для этого отеля (наценка)                                      |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+
| ``providerId``             | число                           | нет              | id поставщика, который предоставил информацию об этом отеле. Эта информация предоставляется не всем |
+----------------------------+---------------------------------+------------------+-----------------------------------------------------------------------------------------------------+

 Дочерние элементы ``Hotel``: ``Rooms``, ``Locations``, ``SpecialOffers``

Элемент Rooms
-------------


Список комнат (дочерние элементы ``Room``). Обязательный элемент. Аттрибутов нет.  Элементы внутри ``Rooms``: 

+-------------+------------------+--------------------------------------------+------------------------------------------------------------------------------------------------------------------+
| **Элемент** | **Обязательный** | **Описание**                               |                                                                                                                  |
+=============+==================+============================================+==================================================================================================================+
| ``Room``    | да               | Параметры комнаты, комнат может быть много |                                                                                                                  |
+-------------+------------------+--------------------------------------------+------------------------------------------------------------------------------------------------------------------+
|             | **Элемент**      | **Обязательный**                           | **Описание**                                                                                                     |
+-------------+------------------+--------------------------------------------+------------------------------------------------------------------------------------------------------------------+
|             | ``ChildAge``     | нет                                        | Возраст ребёнка (2..18). Элемент должен присутствовать, если в родительском элементе Room аттрибут child равен 1 |
+-------------+------------------+--------------------------------------------+------------------------------------------------------------------------------------------------------------------+

Элемент Room
------------

Описание (аттрибуты) комнаты. Обязательный элемент.  Аттрибуты элемента ``Room``: 

+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| **Аттрибут**          | **Тип**       | **Обязательный** | **Описание**                                                               |
+=======================+===============+==================+============================================================================+
| ``roomSizeId``        | число         | да               | id типа размещения. Список типов размещения /xml/room_size                 |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``roomSizeName``      | строка        | да               | Название типа размещения                                                   |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``roomTypeId``        | число         | да               | id категории номера                                                        |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``roomTypeName``      | строка        | да               | Название категории номера                                                  |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``roomViewId``        | число         | да               | id вида из номеров                                                         |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``roomViewName``      | строка        | да               | название вида из номера                                                    |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``roomName``          | строка        | да               | Название номера (размер, тип, вид)                                         |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``roomNumber``        | число         | да               | Число таких комнат (минимум 1)                                             |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``mealId``            | число         | да               | id типа питания, список всех доступных типов питаний /xml/meal             |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``mealName``          | строка        | да               | Название типа питания                                                      |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``mealBreakfastId``   | число         | да               | id типа завтрака, список всех доступных типов завтрака /xml/meal_breakfast |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``mealBreakfastName`` | строка        | да               | Название типа завтрака                                                     |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``children``          | число 0, 4    | да               | Число детей в комнате, 0 или 4                                             |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``cots``              | число 0, 1, 2 | да               | Число люлек 0 или 1 или 2                                                  |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+
| ``sharingBedding``    | true, false   | да               | Разделение постельных принадлежностей на двоих (если true)                 |
+-----------------------+---------------+------------------+----------------------------------------------------------------------------+

Дочерние элементы ``Room``: 

+--------------+------------------+------------------------------------------------------------------------------------------------------------------+
| **Элемент**  | **Обязательный** | **Описание**                                                                                                     |
+==============+==================+==================================================================================================================+
| ``ChildAge`` | нет              | Возраст ребёнка (2..18). Элемент должен присутствовать, если в родительском элементе Room аттрибут child равен 1 |
+--------------+------------------+------------------------------------------------------------------------------------------------------------------+

Элемент Locations
-----------------

Локации отеля (дочерние элементы Location). Необязательный элемент. Может отсутствовать, если отелю не сопоставлена ни одна локация. Аттрибутов нет.  Дочерние элементы ``Locations``: 

+--------------+------------------+--------------------------------------------+
| **Элемент**  | **Обязательный** | **Описание**                               |
+==============+==================+============================================+
| ``Location`` | да               | Описание локации. Локаций может быть много |
+--------------+------------------+--------------------------------------------+


Элемент Location
-----------------

Описание локации(аттрибуты). Обязательный элемент. Дочерних элементов нет.  Аттрибуты элемента ``Location``: 

+--------------+---------+------------------+-----------------------------------------------------+
| **Аттрибут** | **Тип** | **Обязательный** | **Описание**                                        |
+==============+=========+==================+=====================================================+
| ``id``       | число   | да               | id локации отеля, список всех локаций /xml/location |
+--------------+---------+------------------+-----------------------------------------------------+
| ``name``     | строка  | да               | Название локации                                    |
+--------------+---------+------------------+-----------------------------------------------------+

Элемент SpecialOffers
----------------------

Специальные предложения. Необязательный элемент. Спецпредложений может быть много.

Аттрибутов нет.

Дочерние элементы ``SpecialOffers``:

+------------------+------------------+---------------------------------------------+
| **Элемент**      | **Обязательный** | **Описание**                                |
+==================+==================+=============================================+
| ``SpecialOffer`` | да               | Специальное предложение                     |
+------------------+------------------+---------------------------------------------+

Элемент SpecialOffer
----------------------

Аттрибуты элемента ``SpecialOffer``:

+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| **Аттрибут**          | **Тип**       | **Обязательный**  | **Описание**                                                               |
+=======================+===============+===================+============================================================================+
| ``type``              | строка        | нет               | тип                                                                        |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``img``               | строка        | нет               | картинка                                                                   |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``key``               | строка        | нет               | ключ                                                                       |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``id``                | число         | нет               | id спецпредложения                                                         |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``text``              | строка        | нет               | текст спецпредложения                                                      |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``from``              | строка        | нет               | Дата начала действия спец. предложения                                     |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``till``              | строка        | нет               | Дата окончания действия спец. предложения                                  |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``pay``               | строка        | нет               | Количество оплачиваемых ночей для спец. предложения типа "Живи/плати"      |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``nights``            | строка        | нет               | Скидка в ночах                                                             |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``percent``           | строка        | нет               | Скидка в процентах                                                         |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+
| ``discount``          | строка        | нет               | Сумма скидки                                                               |
+-----------------------+---------------+-------------------+----------------------------------------------------------------------------+

Дочерних элементов нет.

Элемент SearchId
----------------

В случае, если запрашиваются отели асинхронным способом (с указанием параметра ?async=1), то элемент будет содержать id инициализированного поиска. Данный ответ придет сразу, на стороне Хотелбука фоново будет происходить поиск отелей. Найденные отели можно запрашивать периодически запросом ``/xml/hotel_search_async?login=&search_id=&from_result_id=`` (например каждую секунду). Более подробно см. [[HotelSearchAsync|HotelSearchAsync.htm]]  Необязательный элемент. Может отсутствовать, если возникли ошибки.