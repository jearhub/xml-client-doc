Изменения заказа
################

Описание XML-схемы
==================

XSD-схема:

-  ``www/xsd/ModifyOrderRequest.xsd``
-  ``www/xsd/ModifyOrderResponse.xsd``

После того, как заказ создан, Вы можете модифицировать один или
несколько отелей в созданном заказе. Для изменения заказа укажите id
заказа и список его элементов (с id элементов), которые Вы желаете
изменить. Так же укажите id номера, если собираетесь изменять
существующий номер заказа. Если необходимо добавить номер, просто не
указывайте его id. Для удаления номера из отеля, не указывайте номер в
запросе. Вы можете изменять размер, тип номера, вид из номера,
количество люлек, дату и длительность заезда. Все идентификаторы (id
заказа, элементов, номеров) можно получить в OrderInfoResponse

Так же указывайте информацию о клиентах в номере. Ребенок (если есть)
должен идти последним в списке клиентов номера. Количество людей должно
соответствовать новому размеру номера. Вы можете добавить/удалить
ребенка из номера

Обратите внимание, что конкретный отель может запрещать изменение
некоторых своих параметров (и параметров своих номеров). Список
редактируемых опций можно получить из OrderInfoResponse. Так же список
номеров, которые заблокированы для модификации, необходимо получать из
OrderInfoResponse

Запрос
------

XML-схема:

.. code-block:: xml

    <?xml version="1.0" encoding="utf-8"?>
    <ModifyOrderRequest>
      [<ContactInfo> - contact information
        <Name>..</Name> - имя
        <Email>..</Email> - email
        <Phone>..</Phone> - телефон
        <Comment>..</Comment> - комментарий
      </ContactInfo>]
      <OrderId>..</OrderId> - id заказа
      [<AccountComment>..</AccountComment>] - Комментарий для счета
      [<PayForm>cash|cashless</PayForm>] - форма оплаты заказа (необязательно)
      <Items> - элементы заказа
        <HotelItem> - отель
          <ItemId>..</ItemId> - id элемента
          <CheckIn>YYYY-MM-DD</CheckIn> - дата заезда
          <Duration>..</Duration> - длительность заезда
          <Rooms> - номер отеля
            <Room
                  [roomId=".."] - id номера (не указывайте, если нужно добавить номер)
                  roomSizeId=".." - id размера номера
                  roomTypeId=".." - id типа номера
                  roomViewId=".." - id вида из номера
                  cots="0|1|2" - количество люлек в номере
                  sharingBedding="true|false" - разделение постельных принадлежностей на двоих или нет
        >
              <RoomPax [child="true|false"] [age=".."]> - клиенты в номере
                <Title>Mr|Mrs|Ms|Chld</Title> - обращение
                <FirstName>..</FirstName> - имя
                <LastName>..</LastName> - фамилия
              </RoomPax>
            </Room>
          </Rooms>
          [<Remarks> - список ремарок (необязательно)
             <Remark>id ремарки</Remark>
          </Remarks>]
          [<Comment>...</Comment>] - свободная ремарка (необязательно)
        </HotelItem>
      </Items>
    </ModifyOrderRequest>

Элемент ModifyOrderRequest
--------------------------

Родительский элемент.

- *Атрибуты: нет.*

Дочерние элементы:

+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
| **Элемент**        | **Обязательный** | **Описание**            |                                 |                           |
+====================+==================+=========================+=================================+===========================+
| ``ContactInfo``    | нет              | контактная информация   |                                 |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    | **Элемент**      | **Обязательный**        | **Описание**                    |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    | ``Name``         | да                      | полное имя                      |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    | ``Email``        | да                      | электронная почта               |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    | ``Phone``        | да                      | телефон                         |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    | ``Comment``      | да                      | комментарий (может быть пустым) |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
| ``OrderId``        | да               | id существующего заказа |                                 |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
| ``AccountComment`` | нет              | Комментарий для счета   |                                 |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
| ``PayForm``        | нет              | Форма оплаты заказа     |                                 |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
| ``Items``          | да               | Элементы заказа (отели) |                                 |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    | **Элемент**      | **Обязательный**        | **Описание**                    |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    | ``HotelItem``    | да                      | Элемент заказа - отель          |                           |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    |                  | **Элемент**             | **Обязательный**                | **Описание**              |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    |                  | ``ItemId``              | да                              | id существующего элемента |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    |                  | ``CheckIn``             | да                              | дата заезда               |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    |                  | ``Duration``            | да                              | длительность заезда       |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+
|                    |                  | ``Rooms``               | да                              | информация о номерах      |
+--------------------+------------------+-------------------------+---------------------------------+---------------------------+

Элемент ContactInfo
-------------------

- *Атрибуты: нет.*

Дочерние элементы:

+-------------+------------------+----------------------------------------------------+
| **Элемент** | **Обязательный** | **Описание**                                       |
+=============+==================+====================================================+
| ``Name``    | да               | Полное имя пользователя (максимально 100 символов) |
+-------------+------------------+----------------------------------------------------+
| ``Email``   | да               | электронный адрес (максимально 100 символов)       |
+-------------+------------------+----------------------------------------------------+
| ``Phone``   | да               | телефон (максимально 15 символов)                  |
+-------------+------------------+----------------------------------------------------+
| ``Comment`` | да               | комментарий (может быть пустым)                    |
+-------------+------------------+----------------------------------------------------+

Элемент Items
-------------

Элементы заказа (отели).

- *Обязательный элемент.*
- *Атрибуты: нет.*

Дочерние элементы:

+---------------+------------------+------------------------+-------------------------------+
| **Элемент**   | **Обязательный** | **Описание**           |                               |
+===============+==================+========================+===============================+
| ``HotelItem`` | да               | Элемент заказа - отель |                               |
+---------------+------------------+------------------------+-------------------------------+
|               | **Элемент**      | **Обязательный**       | **Описание**                  |
+---------------+------------------+------------------------+-------------------------------+
|               | ``ItemId``       | да                     | Идентификатор элемента заказа |
+---------------+------------------+------------------------+-------------------------------+
|               | ``CheckIn``      | да                     | Дата заезда                   |
+---------------+------------------+------------------------+-------------------------------+
|               | ``Duration``     | да                     | Длительность заезда           |
+---------------+------------------+------------------------+-------------------------------+
|               | ``Rooms``        | да                     | Информация о номерах          |
+---------------+------------------+------------------------+-------------------------------+

Элемент HotelItem
-----------------

Элемент заказа - отель.

- *Обязательный элемент.*
- *Атрибуты: нет.*

Дочерние элементы:

+--------------+------------------+---------------------------------------+------------------+----------------------+
| **Элемент**  | **Обязательный** | **Описание**                          |                  |                      |
+==============+==================+=======================================+==================+======================+
| ``ItemId``   | да               | Идентификатор элемента заказа (отеля) |                  |                      |
+--------------+------------------+---------------------------------------+------------------+----------------------+
| ``CheckIn``  | да               | Дата заезда                           |                  |                      |
+--------------+------------------+---------------------------------------+------------------+----------------------+
| ``Duration`` | да               | Длительность заезда                   |                  |                      |
+--------------+------------------+---------------------------------------+------------------+----------------------+
| ``Rooms``    | да               | Информация о номерах отеля            |                  |                      |
+--------------+------------------+---------------------------------------+------------------+----------------------+
|              | **Элемент**      | **Обязательный**                      | **Описание**     |                      |
+--------------+------------------+---------------------------------------+------------------+----------------------+
|              | ``Room``         | да                                    | номер            |                      |
+--------------+------------------+---------------------------------------+------------------+----------------------+
|              |                  | **Элемент**                           | **Обязательный** | **Описание**         |
+--------------+------------------+---------------------------------------+------------------+----------------------+
|              |                  | ``RoomPax``                           | да               | Информация о клиенте |
+--------------+------------------+---------------------------------------+------------------+----------------------+

Элемент Rooms
-------------

Номера с информацией о клиентах, в том же порядке, как получено в ответе OrderInfo.

Вы можете изменить размер, тип номера, вид из номера (для этого
необходимо указать id номера). Так же Вы можете добавить или удалить
номер. Для добавления номера не указывайте id номера в запросе. Для
удаления номера пропустите номер в запросе OrderModify. 

- *Обязательный элемент.*
- *Атрибуты: нет.*

Дочерние элементы:

+-------------+------------------+---------------------+----------------------+----------------------------------+
| **Элемент** | **Обязательный** | **Описание**        |                      |                                  |
+=============+==================+=====================+======================+==================================+
| ``Room``    | да               | Информация о номере |                      |                                  |
+-------------+------------------+---------------------+----------------------+----------------------------------+
|             | **Элемент**      | **Обязательный**    | **Описание**         |                                  |
+-------------+------------------+---------------------+----------------------+----------------------------------+
|             | ``RoomPax``      | да                  | Информация о клиенте |                                  |
+-------------+------------------+---------------------+----------------------+----------------------------------+
|             |                  | **Элемент**         | **Обязательный**     | **Описание**                     |
+-------------+------------------+---------------------+----------------------+----------------------------------+
|             |                  | ``Title``           | да                   | Обращение (Mr / Mrs / Ms / Chld) |
+-------------+------------------+---------------------+----------------------+----------------------------------+
|             |                  | ``FirstName``       | да                   | Имя                              |
+-------------+------------------+---------------------+----------------------+----------------------------------+
|             |                  | ``LastName``        | да                   | Фамилия                          |
+-------------+------------------+---------------------+----------------------+----------------------------------+

Элемент Room
------------

Информация о номере и клиентах, проживающих в нем. Для изменения
существующего номера необходимо указывать его id. И наоборот, чтобы
добавить новый номер в отель, не указывайте id номера. Для удаления
номера из отеля просто не добавляйте его в запрос на изменение заказа

- *Обязательный элемент.*
- *Дочерние элементы: нет.*

Атрибуты:

+--------------------+----------------+------------------+--------------------------------------------------------+
| **Атрибут**        | **Тип**        | **Обязательный** | **Описание**                                           |
+====================+================+==================+========================================================+
| ``roomId``         | число          | нет              | id существующего номера                                |
+--------------------+----------------+------------------+--------------------------------------------------------+
| ``roomSizeId``     | число          | да               | id размера номера (/xml/room\_size)                    |
+--------------------+----------------+------------------+--------------------------------------------------------+
| ``roomTypeId``     | число          | да               | id типа номера (/xml/room\_type)                       |
+--------------------+----------------+------------------+--------------------------------------------------------+
| ``roomViewId``     | число          | да               | id вида из номера (/xml/room\_view)                    |
+--------------------+----------------+------------------+--------------------------------------------------------+
| ``cots``           | 0 или 1 или 2  | да               | Количество люлек в номере                              |
+--------------------+----------------+------------------+--------------------------------------------------------+
| ``sharingBedding`` | true или false | да               | Разделение постельных принадлежностей на двоих или нет |
+--------------------+----------------+------------------+--------------------------------------------------------+

Элемент RoomPax
---------------

Информация о клиентах в номере. Если в номере есть ребенок, он должен идти последним в списке клиентов номера!

- *Обязательный элемент.*

Атрибуты:

+-------------+----------------+------------------+-----------------------------------------+
| **Атрибут** | **Тип**        | **Обязательный** | **Описание**                            |
+=============+================+==================+=========================================+
| ``child``   | true или false | нет              | true – ребенок                          |
+-------------+----------------+------------------+-----------------------------------------+
| ``age``     | число          | нет              | возраст ребенка (2–18), если child=true |
+-------------+----------------+------------------+-----------------------------------------+

Дочерние элементы:

+---------------+------------------+----------------------------------+
| **Элемент**   | **Обязательный** | **Описание**                     |
+===============+==================+==================================+
| ``Title``     | да               | Обращение (Mr / Mrs / Ms / Chld) |
+---------------+------------------+----------------------------------+
| ``FirstName`` | да               | Имя                              |
+---------------+------------------+----------------------------------+
| ``LastName``  | да               | Фамилия                          |
+---------------+------------------+----------------------------------+

Элемент Remarks
---------------

Список ремарок.

- *Необязательный элемент.*
- *Атрибуты: нет.*

Дочерние элементы:

+-------------+------------------+------------------------------+
| **Элемент** | **Обязательный** | **Описание**                 |
+=============+==================+==============================+
| ``Remark``  | да               | Код ремарки (например, "LA") |
+-------------+------------------+------------------------------+

Элемент Remark
--------------

Код ремарки.

Список всех доступных кодов ремарок можно получить по запросу ``/xml/remark``. Код ремарки находится в атрибуте Remark@temp ответа. 
Список ремарок, допустимых для данного предложения можно получить по запросу ``/xml/hotel\_modify\_restrictions?search\_id=[id\_поиска]&result\_id=[id\_предложения]``.
Коды допустимых ремарок находятся в Hotel/PossibleRemarks/Remark@code
 
- *Атрибуты: нет.*
- *Дочерние элементы: нет.*

Элемент Comment
---------------

Свободная ремарка (текст). Допускаются комментарии на английском языке.

- *Необязательный элемент.*
- *Атрибуты: нет.*
- *Дочерние элементы: нет.*

Ответ, ModifyOrderResponse
--------------------------

Шаблон ответа такой же, как ответ на запрос информации о заказе (``OrderInfoResponse``).