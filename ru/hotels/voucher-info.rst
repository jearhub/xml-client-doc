Информация для ваучера
######################

Описание XML схемы получения информации для ваучера
===================================================

Запрос на получение XML-описания ваучера сейчас формируется через URL (методом GET).

XSD-схема ответа информации для ваучера:

-  ``www/xsd/VoucherInfoResponse.xsd``

Запрос информации для ваучера
-----------------------------

В запросе нужно указать идентификатор заказа ``?order_id=id_заказа``,
взятый из ответа на создание заказа, и идентификатор элемента заказа
``?item_id=id_элемента_заказа``, взятый из атрибута элемента HotelItem
из информации о заказе. Запрос формируется по пути: ``/xml/voucher_info``

Ответ на запрос информации для ваучера, VoucherInfoResponse
-----------------------------------------------------------

::

    <?xml version="1.0" encoding="utf-8"?>
    <VoucherInfoResponse>
      [<Errors><Error code="..." description="..."></Errors>]
      <Order Id="...">
        <ItemList>
          <Item Id="...">
            <VoucherAvailable>0|1</VoucherAvailable>
            <Voucher>
              <Issued>...</Issued>
              <BookingDetails>
                [<Supplier>...</Supplier>]
                [<Reference>...</Reference>]
                [<AdditionalDetailList>
                   <AdditionalDetail> - список дополнительных данных
                     <Title>...</Title>
                     <Value>...</Value>
                   </AdditionalDetail>
                 </AdditionalDetailList>]
              </BookingDetails>
              <Hotel Id="...">
                <Name>...</Name>
                <Country>...</Country>
                <City>...</City>
                <Address>...</Address>
                <Email>...</Email>
                <Telephone>...</Telephone>
                <Fax>...</Fax>
                [<Map type="graphic|link">...</Map>]
                [<Position>
                   <Latitude>...</Latitude>
                   <Longitude>...</Longitude>
                 </Position>]
                [<AdditionalDetailList>
                   <AdditionalDetail>
                     <Title>...</Title>
                     <Value>...</Value>
                   </AdditionalDetail>
                 </AdditionalDetailList>]
              </Hotel>
              <RoomList>
                <Room Id="...">
                  <Name>...</Name>
                  <CheckInDate>...</CheckInDate>
                  <CheckOutDate>...</CheckOutDate>
                  <Duration>...</Duration>
                  <Paxes>...</Paxes>
                  <NumberOfRooms>...</NumberOfRooms>
                  [<AdditionalDetailList>
                     <AdditionalDetail>
                       <Title>...</Title>
                       <Value>...</Value>
                     </AdditionalDetail>
                   </AdditionalDetailList>]
                </Room>
              </RoomList>
              [<AOTNumbers> - список контактов для экстренной связи
                 <Location name="...">...</Location>
               </AOTNumbers>]
              [<AdditionalInformation>...</AdditionalInformation>]
            </Voucher>
          </Item>
        </ItemList>
      </Order>
    </VoucherInfoResponse>

Элемент VoucherInfoResponse
"""""""""""""""""""""""""""

Корневой элемент.

**Атрибуты:** нет.

**Дочерние элементы:**

+--------+-------------------------------------+--------------------------+
| Имя    | Обязательный                        | Описание                 |
+========+=====================================+==========================+
| Errors | Нет                                 | Список ошибок, если есть |
+--------+-------------------------------------+--------------------------+
| Order  | Нет (отсутствует, если есть ошибки) | Описание заказа          |
+--------+-------------------------------------+--------------------------+

Элемент Errors
--------------

Список ошибок, если таковые имеются.

**Атрибуты:** нет.

**Дочерние элементы:**

+-------+--------------+------------------+
| Имя   | Обязательный | Описание         |
+=======+==============+==================+
| Error | Да           | Описание ошибки. |
+-------+--------------+------------------+

Атрибуты:

-  ``code`` - код ошибки
-  ``description`` - описание ошибки

Элемент Order
-------------

Содержит описание заказа.

**Атрибуты:**

+-------+---------+----------------+------------------------+
| Имя   | Тип     | Обязательный   | Описание               |
+=======+=========+================+========================+
| Id    | Число   | Да             | Идентификатор заказа   |
+-------+---------+----------------+------------------------+

**Дочерние элементы:**

+------------+----------------+----------------------------------+
| Имя        | Обязательный   | Описание                         |
+============+================+==================================+
| ItemList   | Да             | Список элементов заказа (Item)   |
+------------+----------------+----------------------------------+

Элемент Order/ItemList
----------------------

Содержит список элементов заказа.

**Атрибуты:** нет.

**Дочерние элементы:**

+--------+----------------+-----------------------------+
| Имя    | Обязательный   | Описание                    |
+========+================+=============================+
| Item   | Да             | Описание элемента заказа.   |
+--------+----------------+-----------------------------+

Элемент Order/ItemList/Item
---------------------------

Содержит описание элемента заказа.

**Атрибуты:**

+-------+---------+----------------+---------------------------------+
| Имя   | Тип     | Обязательный   | Описание                        |
+=======+=========+================+=================================+
| Id    | Число   | Да             | Идентификатор элемента заказа   |
+-------+---------+----------------+---------------------------------+

**Дочерние элементы:**

+--------------------+-----------+----------------+--------------------------------------------+
| Имя                | Тип       | Обязательный   | Описание                                   |
+====================+===========+================+============================================+
| VoucherAvailable   | 0 или 1   | Да             | Есть ли ваучер у элемента заказа           |
+--------------------+-----------+----------------+--------------------------------------------+
| Voucher            | Строка    | Да             | Данные ваучера для этого элемента заказа   |
+--------------------+-----------+----------------+--------------------------------------------+

Элемент Order/ItemList/Item/Voucher
-----------------------------------

Данные ваучера для этого элемента заказа.

**Атрибуты:** нет.

**Дочерние элементы:**

+----------------+--------------+---------------------------------------+
| Имя            | Обязательный | Описание                              |
+================+==============+=======================================+
| Issued         | Да           | Дата выпуска ваучера                  |
+----------------+--------------+---------------------------------------+
| BookingDetails | Да           | Данные о бронировании                 |
+----------------+--------------+---------------------------------------+
| Hotel          | Да           | Описание отеля (элемента заказа)      |
+----------------+--------------+---------------------------------------+
| RoomList       | Да           | Список забронированных комнат         |
+----------------+--------------+---------------------------------------+
| AOTNumbers     | Нет          | Список контактов для экстренной связи |
+----------------+--------------+---------------------------------------+

Элемент Order/ItemList/Item/Voucher/BookingDetails
--------------------------------------------------

Данные о бронировании

**Атрибуты:** нет.

**Дочерние элементы:**

+----------------------+-----------------------------------+--------------+---------------------------------------------+
| Имя                  | Тип                               | Обязательный | Описание                                    |
+======================+===================================+==============+=============================================+
| Supplier             | Строка                            | Нет          | Название поставщика                         |
+----------------------+-----------------------------------+--------------+---------------------------------------------+
| Reference            | Строка                            | Нет          | Референс заказа                             |
+----------------------+-----------------------------------+--------------+---------------------------------------------+
| AdditionalDetailList | Список элементов AdditionalDetail | Нет          | Список дополнительных данных о бронировании |
+----------------------+-----------------------------------+--------------+---------------------------------------------+

Элемент Order/ItemList/Item/Voucher/BookingDetails/AdditionalDetailLists/AdditionalDetailList
---------------------------------------------------------------------------------------------

Список дополнительных данных

**Атрибуты:** нет.

**Дочерние элементы:**

Имя  Обязательный  Описание
AdditionalDetail  Нет  Дополнительные данные - пара дочерних элементов:

-  Title - название дополнительного параметра
-  Value - его значение

Элемент Order/ItemList/Item/Voucher/Hotel
-----------------------------------------

Данные об отеле, элементе заказа.

**Атрибуты:**

+-------+----------------+-----------------------+
| Имя   | Обязательный   | Описание              |
+=======+================+=======================+
| Id    | Да             | Идентификатор отеля   |
+-------+----------------+-----------------------+

**Дочерние элементы:**

+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| Имя                  | Тип                               | Обязательный | Описание                                                              |
+======================+===================================+==============+=======================================================================+
| Name                 | Строка                            | Да           | Название отеля                                                        |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| Country              | Строка                            | Да           | Название страны, где расположен отель                                 |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| City                 | Строка                            | Да           | Название города, где расположен отель                                 |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| Address              | Строка                            | Да           | Адрес отеля                                                           |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| Email                | Строка                            | Да           | Адрес электронной почты отеля                                         |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| Telephone            | Строка                            | Да           | Телефон отеля                                                         |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| Fax                  | Строка                            | Да           | Номер факса отеля                                                     |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| Map                  | Строка                            | Нет          | URL фотографии отеля                                                  |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
|                      |                                   |              | Атрибуты:                                                             |
|                      |                                   |              |                                                                       |
|                      |                                   |              | * type - тип (graphic или link)                                       |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| Position             | Вложенные элементы                | Нет          | Географические широта и долгота отеля, если такая информация доступна |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+
| AdditionalDetailList | Список элементов AdditionalDetail | Нет          | Список дополнительных данных об отеле                                 |
+----------------------+-----------------------------------+--------------+-----------------------------------------------------------------------+

Элемент Order/ItemList/Item/Voucher/Hotel/Position
--------------------------------------------------

Широта и долгота отеля, если такая информация доступна.

**Атрибуты:** нет.

**Дочерние элементы:**

+-----------+--------+--------------+----------+
| Имя       | Тип    | Обязательный | Описание |
+===========+========+==============+==========+
| Latitude  | Строка | Да           | Широта   |
+-----------+--------+--------------+----------+
| Longitude | Строка | Да           | Долгота  |
+-----------+--------+--------------+----------+

Элемент Order/ItemList/Item/Voucher/RoomList
--------------------------------------------

Список забронированных номеров.

**Атрибуты:** нет.

**Дочерние элементы:**

+------+--------------+-----------------+
| Имя  | Обязательный | Описание        |
+======+==============+=================+
| Room | Да           | Данные о номере |
+------+--------------+-----------------+

Элемент Order/ItemList/Item/Voucher/RoomList/Room
-------------------------------------------------

Данные о номере.

**Атрибуты:**

+-------+----------------+--------------------------------------------------------+
| Имя   | Обязательный   | Описание                                               |
+=======+================+========================================================+
| Id    | Да             | Идентификатор забронированного номера на стороне UTS   |
+-------+----------------+--------------------------------------------------------+

**Дочерние элементы:**

+----------------------+-----------------------------------+--------------+---------------------------------------+
| Имя                  | Тип                               | Обязательный | Описание                              |
+======================+===================================+==============+=======================================+
| Name                 | Строка                            | Да           | Название типа номера                  |
+----------------------+-----------------------------------+--------------+---------------------------------------+
| CheckInDate          | Дата                              | Да           | Дата начала заезда                    |
+----------------------+-----------------------------------+--------------+---------------------------------------+
| CheckOutDate         | Дата                              | Да           | Дата окончания заезда                 |
+----------------------+-----------------------------------+--------------+---------------------------------------+
| Duration             | Число                             | Да           | Длительность заезда (дни)             |
+----------------------+-----------------------------------+--------------+---------------------------------------+
| Paxes                | Строка                            | Да           | Ф.И.О. главного человека в номере     |
+----------------------+-----------------------------------+--------------+---------------------------------------+
| NumberOfRooms        | Число                             | Да           | Количество номеров с таким описанием  |
+----------------------+-----------------------------------+--------------+---------------------------------------+
| AdditionalDetailList | Список элементов AdditionalDetail | Нет          | Список дополнительных данных о номере |
+----------------------+-----------------------------------+--------------+---------------------------------------+

Элемент Order/ItemList/Item/Voucher/AOTNumbers
----------------------------------------------

Список контактов для экстренной связи.

**Атрибуты:** нет.

**Дочерние элементы:**

+----------+--------+--------------+--------------------------------------------+
| Имя      | Тип    | Обязательный | Описание                                   |
+==========+========+==============+============================================+
| Location | Строка | Да           | Телефоны для города, заданного в атрибуте: |
|          |        |              |                                            |
|          |        |              | * name - название города                   |
+----------+--------+--------------+--------------------------------------------+
