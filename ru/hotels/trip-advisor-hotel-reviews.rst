Рейтинг и отзывы TripAdvisor
############################

Описание XML схемы получения списка рейтингов и отзывов TripAdvisor по заданному отелю
======================================================================================

Запрос на получение списка рейтингов и отзывов формируется через URL
(методом GET), передаются стандартные параметры аутентификации(login,
checksum, timestamp)

Запрос списка рейтингов и отзывов TripAdvisor по заданному отелю
----------------------------------------------------------------

(``login``, ``password``, ``checksum``, ...) 
Запрос формируется по пути: ``/xml/tripadvisor_hotel_reviews``

Возможные параметры, кроме параметров аутентификации:

-  ``hotel_id`` - id отеля
-  Либо: ``hotel_name`` - приблизительное имя отеля (для поиска по LIKE)
-  ``base64`` - по умолчанию код виджета кодируется в Base64, чтобы избежать потенциальных проблем с парсерами; в случае, если передан ``base64 = no``, кодирование в base64 не происходит, и в ответе передаётся просто обёрнутый в CDATA код виджета

Ответ на запрос списка рейтингов и отзывов — HotelReviews
---------------------------------------------------------

::

        <?xml version="1.0" encoding="utf-8"?>
        <Response>
            <HotelReviews>
                <Hotel id="id_отеля" review_count="количество_отзывов" average_rating="средний_рейтинг" rating_url="адрес_картинки_для_обозначения_рейтинга" hotel_url="адрес_страницы_отеля_на_TripAdvisor">
                    <ReviewsWidgetBody encoded="base64 или no">
                        <![CDATA[
                            Код виджета отзывов TripAdvisor в чистом виде либо в Base64 в зависимости от переданного значения параметра base64
                        ]]>
                    </ReviewsWidgetBody>
                </Hotel>
                ...
            </HotelReviews>
        </Response>

Элемент Response
----------------

Корневой элемент.

**Атрибуты:** нет.

**Дочерний элемент:**

+--------------+--------------+------------------------------------+
| Имя          | Обязательный | Описание                           |
+==============+==============+====================================+
| HotelReviews | Да           | Содержит список отелей и рейтингов |
+--------------+--------------+------------------------------------+

Элемент HotelReviews
--------------------

Содержит список отелей и рейтингов

**Атрибуты:** нет.

**Дочерний элемент:**

+-------+--------------+--------------------------------+
| Имя   | Обязательный | Описание                       |
+=======+==============+================================+
| Hotel | Нет          | Отель и информация о рейтингах |
+-------+--------------+--------------------------------+

Атрибуты:

-  ``id`` - идентификатор отеля
-  ``review_count`` - количество отзывов
-  ``average_rating`` - средний рейтинг
-  ``rating_url`` - ссылка на фирменную картинку с рейтингом
-  ``hotel_url`` - ссылка на страницу отеля на TripAdvisor

Элемент Hotel
-------------

Содержит объект, содержащий код виджета отзывов TripAdvisor

**Атрибуты:**

-  ``id`` - идентификатор отеля
-  ``review_count`` - количество отзывов
-  ``average_rating`` - средний рейтинг
-  ``rating_url`` - ссылка на фирменную картинку с рейтингом
-  ``hotel_url`` - ссылка на страницу отеля на TripAdvisor

**Дочерний элемент:**

+-------------------+--------------+---------------------------------------------------------------------------------------------+
| Имя               | Обязательный | Описание                                                                                    |
+===================+==============+=============================================================================================+
| ReviewsWidgetBody | Нет          | Обёрнутый в CDATA код виджета отзывов TripAdviser в чистом или закодированном в base64 виде |
+-------------------+--------------+---------------------------------------------------------------------------------------------+

Атрибуты:

-  ``encoded`` — показывает, закодировано ли содержимое в base64 или нет, возможные значения: ``base64`` или ``no``

Возможные ошибки
----------------

Помимо стандартных ошибок аутентификации, возможна ошибка, связанная с
попыткой получить рейтинги и/или отзывы TripAdvisor тогда, когда это
действие не разрешено правами для данного пользователя. В этом случае
будет возвращена следующая ошибка:

-  <Error>You have no ACL rights to use TripAdvisor API</Error>